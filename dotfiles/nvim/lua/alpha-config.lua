local dashboard = require "alpha.themes.dashboard"
hydra = {
    [[   ⣴⣶⣤⡤⠦⣤⣀⣤⠆     ⣈⣭⣿⣶⣿⣦⣼⣆          ]],
    [[    ⠉⠻⢿⣿⠿⣿⣿⣶⣦⠤⠄⡠⢾⣿⣿⡿⠋⠉⠉⠻⣿⣿⡛⣦       ]],
    [[          ⠈⢿⣿⣟⠦ ⣾⣿⣿⣷    ⠻⠿⢿⣿⣧⣄     ]],
    [[           ⣸⣿⣿⢧ ⢻⠻⣿⣿⣷⣄⣀⠄⠢⣀⡀⠈⠙⠿⠄    ]],
    [[          ⢠⣿⣿⣿⠈    ⣻⣿⣿⣿⣿⣿⣿⣿⣛⣳⣤⣀⣀   ]],
    [[   ⢠⣧⣶⣥⡤⢄ ⣸⣿⣿⠘  ⢀⣴⣿⣿⡿⠛⣿⣿⣧⠈⢿⠿⠟⠛⠻⠿⠄  ]],
    [[  ⣰⣿⣿⠛⠻⣿⣿⡦⢹⣿⣷   ⢊⣿⣿⡏  ⢸⣿⣿⡇ ⢀⣠⣄⣾⠄   ]],
    [[ ⣠⣿⠿⠛ ⢀⣿⣿⣷⠘⢿⣿⣦⡀ ⢸⢿⣿⣿⣄ ⣸⣿⣿⡇⣪⣿⡿⠿⣿⣷⡄  ]],
    [[ ⠙⠃   ⣼⣿⡟  ⠈⠻⣿⣿⣦⣌⡇⠻⣿⣿⣷⣿⣿⣿ ⣿⣿⡇ ⠛⠻⢷⣄ ]],
    [[      ⢻⣿⣿⣄   ⠈⠻⣿⣿⣿⣷⣿⣿⣿⣿⣿⡟ ⠫⢿⣿⡆     ]],
    [[       ⠻⣿⣿⣿⣿⣶⣶⣾⣿⣿⣿⣿⣿⣿⣿⣿⡟⢀⣀⣤⣾⡿⠃     ]],
}
local batman = {
"                         .^!^                                           .!~:                        ",
"                    ^!JPB&B!.                                            !&&BPJ!:                   ",
"                ^?P#@@@@@G.                   :       :                   !@@@@@&BY!:               ",
"             ^JB@@@@@@@@@7                   .#~     ?P                   .&@@@@@@@@&G?:            ",
"          .7G@@@@@@@@@@@@#!                  ?@#^   ~@@^                 .5@@@@@@@@@@@@@G7.         ",
"        .?#@@@@@@@@@@@@@@@@BY!^.             B@@&BBB&@@Y              :~Y&@@@@@@@@@@@@@@@@#?.       ",
"       !#@@@@@@@@@@@@@@@@@@@@@@#G5Y?!~^:..  !@@@@@@@@@@#.   ..::^!7J5B&@@@@@@@@@@@@@@@@@@@@@B!      ",
"     .5@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&##B#@@@@@@@@@@@BBBB##&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@Y     ",
"    :B@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@5    ",
"   .B@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@?   ",
"   5@&#BGGPPPPPGGB&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&BGGPP5PPPGBB#&#.  ",
"   ^:..           .^!YB@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&57^.            .:^.  ",
"                       ~G@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@Y.                      ",
"                         P@@@#BGGGGB#@@@@@@@@@@@@@@@@@@@@@@@@@#BP5555PG#@@@P                        ",
"                         :J!:.      .^!JG&@@@@@@@@@@@@@@@@#57^.        .:!5~                        ",
"                                         :?G@@@@@@@@@@@@P!.                                         ",
"                                            ~5@@@@@@@@5^                                            ",
"                                              ^P@@@@G^                                              ",
"                                                !#@?                                                ",
"                                                 :^                                                 ",
}
local logo = {
        [[                               __                ]],
        [[  ___     ___    ___   __  __ /\_\    ___ ___    ]],
        [[ / _ `\  / __`\ / __`\/\ \/\ \\/\ \  / __` __`\  ]],
        [[/\ \/\ \/\  __//\ \_\ \ \ \_/ |\ \ \/\ \/\ \/\ \ ]],
        [[\ \_\ \_\ \____\ \____/\ \___/  \ \_\ \_\ \_\ \_\]],
        [[ \/_/\/_/\/____/\/___/  \/__/    \/_/\/_/\/_/\/_/]],
}

local mono12 = {
    [[                                           ██             ]],
    [[                                           ▀▀             ]],
    [[██▄████▄   ▄████▄    ▄████▄   ██▄  ▄██   ████     ████▄██▄]],
    [[██▀   ██  ██▄▄▄▄██  ██▀  ▀██   ██  ██      ██     ██ ██ ██]],
    [[██    ██  ██▀▀▀▀▀▀  ██    ██   ▀█▄▄█▀      ██     ██ ██ ██]],
    [[██    ██  ▀██▄▄▄▄█  ▀██▄▄██▀    ████    ▄▄▄██▄▄▄  ██ ██ ██]],
    [[▀▀    ▀▀    ▀▀▀▀▀     ▀▀▀▀       ▀▀     ▀▀▀▀▀▀▀▀  ▀▀ ▀▀ ▀▀]],
}
local char2 = {
    [[##  ##  ######  #####  ##   ## ###### ##   ##]],
    [[### ## ####### ####### ##   ## ###### ### ###]],
    [[###### ##      ##   ## ##   ##   ##   #######]],
    [[###### ####### ##   ## ##   ##   ##   #######]],
    [[## ### ##      ##   ## ### ###   ##   ## # ##]],
    [[##  ## ####### #######  #####  ###### ##   ##]],
    [[##  ##  ######  #####    ###   ###### ##   ##]],
  }
local headers = {batman,hydra,logo,mono12,char2}

local function header_chars()
  math.randomseed( os.time() )
  return headers[ math.random(#headers) ]
end

 vim.highlight.create('StartLogo1', {guifg='#300c71', guibg='NONE'}, false)
 vim.highlight.create('StartLogo2', {guifg='#0f1d7c', guibg='NONE'}, false)
 vim.highlight.create('StartLogo3', {guifg='#002886', guibg='NONE'}, false)
 vim.highlight.create('StartLogo4', {guifg='#00328d', guibg='NONE'}, false)
 vim.highlight.create('StartLogo5', {guifg='#003a93', guibg='NONE'}, false)
 vim.highlight.create('StartLogo6', {guifg='#004196', guibg='NONE'}, false)
 vim.highlight.create('StartLogo7', {guifg='#004898', guibg='NONE'}, false)
 vim.highlight.create('StartLogo8', {guifg='#004e98', guibg='NONE'}, false)
 vim.highlight.create('StartLogo9', {guifg='#005496', guibg='NONE'}, false)
vim.highlight.create('StartLogo10', {guifg='#005992', guibg='NONE'}, false)
vim.highlight.create('StartLogo11', {guifg='#005e8e', guibg='NONE'}, false)
vim.highlight.create('StartLogo12', {guifg='#006388', guibg='NONE'}, false)
vim.highlight.create('StartLogo13', {guifg='#006882', guibg='NONE'}, false)
vim.highlight.create('StartLogo14', {guifg='#006c7a', guibg='NONE'}, false)
vim.highlight.create('StartLogo15', {guifg='#007173', guibg='NONE'}, false)
vim.highlight.create('StartLogo16', {guifg='#00756b', guibg='NONE'}, false)
vim.highlight.create('StartLogo17', {guifg='#007964', guibg='NONE'}, false)
vim.highlight.create('StartLogo18', {guifg='#007c5d', guibg='NONE'}, false)
vim.highlight.create('StartLogo19', {guifg='#008056', guibg='NONE'}, false)
vim.highlight.create('StartLogo20', {guifg='#148350', guibg='NONE'}, false)

local function header_color()
  local lines = {}
  for i, line_chars in pairs(header_chars()) do
    local hi = "StartLogo" .. i
    local line = {
      type = "text",
      val = line_chars,
      opts = {
        hl = hi,
        shrink_margin = false,
        position = "center",
      },
    }
    table.insert(lines, line)
  end

  local output = {
    type = "group",
    val = lines,
    opts = { position = "center", },
  }

  return output
end
dashboard.section.header.type = "group"
dashboard.section.header.val = header_color().val
dashboard.section.buttons.val = {
    dashboard.button("f", "  Find file", ":Telescope find_files <CR>"),
    dashboard.button("e", "  New file", ":ene <BAR> startinsert <CR>"),
    dashboard.button("p", "  Find sessions", ":Telescope possession list <CR>"),
    dashboard.button("r", "  Recently used files", ":Telescope oldfiles <CR>"),
    dashboard.button("t", "  Find text", ":Telescope live_grep <CR>"),
    dashboard.button("c", "  Configuration", ":e $MYVIMRC<CR>"),
    dashboard.button("q", "  Quit Neovim", ":qa<CR>"),
}


local query = require('possession.query')
local get_layout = function()
    return query.alpha_workspace_layout(
        {},
        dashboard.button,
        { others_name = 'Sessions',}
    )
end
local utils = require('possession.utils')
local function session()
    return {
        type = 'group',
        val = utils.throttle(get_layout, 5000),
        --opts = {
          --  position = "center",
            --hl = "Type",
            -- wrap = "overflow";
        --},
    }
end

sess = session()
table.insert(dashboard.config.layout,5,sess)
--dashboard.section.footer.val = session() --footer()

dashboard.section.footer.opts.hl = "Type"
dashboard.section.header.opts.hl = "StartLogo2"
dashboard.section.buttons.opts.hl = "Keyword"

dashboard.opts.opts.noautocmd = true

return dashboard.opts
